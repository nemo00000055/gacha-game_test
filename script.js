const characters = [
  {
    "name": "Drenwyn",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/drenwyn.png"
  },
  {
    "name": "Aethshade",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/aethshade.png"
  },
  {
    "name": "Skelveil",
    "rarity": "Rare",
    "color": "#4a90e2",
    "image": "assets/characters/skelveil.png"
  },
  {
    "name": "Ravwyn",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/ravwyn.png"
  },
  {
    "name": "Thalsoul",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/thalsoul.png"
  },
  {
    "name": "Velgaze",
    "rarity": "Epic",
    "color": "#9b59b6",
    "image": "assets/characters/velgaze.png"
  },
  {
    "name": "Drenthorn",
    "rarity": "Rare",
    "color": "#4a90e2",
    "image": "assets/characters/drenthorn.png"
  },
  {
    "name": "Myrathorn",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/myrathorn.png"
  },
  {
    "name": "Drenflare",
    "rarity": "Rare",
    "color": "#4a90e2",
    "image": "assets/characters/drenflare.png"
  },
  {
    "name": "Myradrake",
    "rarity": "Epic",
    "color": "#9b59b6",
    "image": "assets/characters/myradrake.png"
  },
  {
    "name": "Eiraflare",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/eiraflare.png"
  },
  {
    "name": "Eiraveil",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/eiraveil.png"
  },
  {
    "name": "Aethveil",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/aethveil.png"
  },
  {
    "name": "Myrasong",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/myrasong.png"
  },
  {
    "name": "Ravgaze",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/ravgaze.png"
  },
  {
    "name": "Skelflare",
    "rarity": "Rare",
    "color": "#4a90e2",
    "image": "assets/characters/skelflare.png"
  },
  {
    "name": "Thalsong",
    "rarity": "Rare",
    "color": "#4a90e2",
    "image": "assets/characters/thalsong.png"
  },
  {
    "name": "Eirashade",
    "rarity": "Legendary",
    "color": "#f1c40f",
    "image": "assets/characters/eirashade.png"
  },
  {
    "name": "Kaelshade",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/kaelshade.png"
  },
  {
    "name": "Thalveil",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/thalveil.png"
  },
  {
    "name": "Veldrake",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/veldrake.png"
  },
  {
    "name": "Zorflare",
    "rarity": "Epic",
    "color": "#9b59b6",
    "image": "assets/characters/zorflare.png"
  },
  {
    "name": "Eirasong",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/eirasong.png"
  },
  {
    "name": "Aethsong",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/aethsong.png"
  },
  {
    "name": "Drenshade",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/drenshade.png"
  },
  {
    "name": "Aethflare",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/aethflare.png"
  },
  {
    "name": "Kaelgaze",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/kaelgaze.png"
  },
  {
    "name": "Ravveil",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/ravveil.png"
  },
  {
    "name": "Ravshade",
    "rarity": "Epic",
    "color": "#9b59b6",
    "image": "assets/characters/ravshade.png"
  },
  {
    "name": "Skelwyn",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/skelwyn.png"
  },
  {
    "name": "Thallance",
    "rarity": "Epic",
    "color": "#9b59b6",
    "image": "assets/characters/thallance.png"
  },
  {
    "name": "Ravthorn",
    "rarity": "Rare",
    "color": "#4a90e2",
    "image": "assets/characters/ravthorn.png"
  },
  {
    "name": "Skellance",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/skellance.png"
  },
  {
    "name": "Eirathorn",
    "rarity": "Mythic",
    "color": "#e74c3c",
    "image": "assets/characters/eirathorn.png"
  },
  {
    "name": "Zorlance",
    "rarity": "Epic",
    "color": "#9b59b6",
    "image": "assets/characters/zorlance.png"
  },
  {
    "name": "Aethwyn",
    "rarity": "Legendary",
    "color": "#f1c40f",
    "image": "assets/characters/aethwyn.png"
  },
  {
    "name": "Kaelwyn",
    "rarity": "Epic",
    "color": "#9b59b6",
    "image": "assets/characters/kaelwyn.png"
  },
  {
    "name": "Skelshade",
    "rarity": "Epic",
    "color": "#9b59b6",
    "image": "assets/characters/skelshade.png"
  },
  {
    "name": "Zorsoul",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/zorsoul.png"
  },
  {
    "name": "Zorsong",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/zorsong.png"
  },
  {
    "name": "Thalgaze",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/thalgaze.png"
  },
  {
    "name": "Ravdrake",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/ravdrake.png"
  },
  {
    "name": "Velwyn",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/velwyn.png"
  },
  {
    "name": "Drensoul",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/drensoul.png"
  },
  {
    "name": "Ravsoul",
    "rarity": "Legendary",
    "color": "#f1c40f",
    "image": "assets/characters/ravsoul.png"
  },
  {
    "name": "Zorwyn",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/zorwyn.png"
  },
  {
    "name": "Myrashade",
    "rarity": "Rare",
    "color": "#4a90e2",
    "image": "assets/characters/myrashade.png"
  },
  {
    "name": "Skelsong",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/skelsong.png"
  },
  {
    "name": "Zorthorn",
    "rarity": "Common",
    "color": "#b0b0b0",
    "image": "assets/characters/zorthorn.png"
  },
  {
    "name": "Kaellance",
    "rarity": "Epic",
    "color": "#9b59b6",
    "image": "assets/characters/kaellance.png"
  }
];

function weightedRandomPick() {
  const weights = {
    "Common": 50,
    "Rare": 30,
    "Epic": 16,
    "Legendary": 3,
    "Mythic": 1
  };
  const pool = [];

  characters.forEach(char => {
    const weight = weights[char.rarity] || 1;
    for (let i = 0; i < weight; i++) {
      pool.push(char);
    }
  });

  const randomIndex = Math.floor(Math.random() * pool.length);
  return pool[randomIndex];
}

function pullCharacters(amount = 1) {
  const container = document.getElementById('result');
  container.innerHTML = '';

  const audio = document.getElementById('sfx');
  if (audio) {
    audio.currentTime = 0;
    audio.play();
  }

  for (let i = 0; i < amount; i++) {
    const char = weightedRandomPick();
    const card = document.createElement('div');
    card.classList.add('card');

    const img = document.createElement('img');
    img.src = char.image;
    img.style.borderColor = char.color;

    const name = document.createElement('h3');
    name.textContent = char.name;
    name.style.color = char.color;

    const rarity = document.createElement('p');
    rarity.textContent = `Rarity: ${char.rarity}`;
    rarity.style.color = char.color;

    card.appendChild(img);
    card.appendChild(name);
    card.appendChild(rarity);
    container.appendChild(card);
  }
}

document.getElementById('pullOne').addEventListener('click', () => pullCharacters(1));
document.getElementById('pullTen').addEventListener('click', () => pullCharacters(10));
