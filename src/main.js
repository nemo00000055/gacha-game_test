import{setupUI}from'./ui/panels.js';import{renderWaveInfo,renderTheme}from'./ui/render.js';const SAVE_KEY='mythic-arena-save';const state={side:null,wave:1,theme:{name:'Grasslands'},auto:{running:false,speedMs:800},player:{equipment:{}},inventory:{items:[],stash:[]},shop:{list:(c)=>([{id:`${c}-001`,name:`Basic ${c[0].toUpperCase()+c.slice(1)} 1`,price:10},{id:`${c}-002`,name:`Basic ${c[0].toUpperCase()+c.slice(1)} 2`,price:20}]),buyback:()=>[]}};const systems={pause(){},setAuto(f){state.auto.running=f;},start(s){state.side=s;},buy(c,sku){},buyback(id){},async save(){try{localStorage.setItem(SAVE_KEY,JSON.stringify(state));return true}catch{return false}},async load(){try{const raw=localStorage.getItem(SAVE_KEY);if(!raw)return false;Object.assign(state,JSON.parse(raw));renderWaveInfo(state);renderTheme(state);return true}catch{return false}}};setupUI(state,systems);window.__state=state;window.__systems=systems;